<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>DataCapturing - ServerConnection</title>
    <link rel="stylesheet" type="text/css" href="/ios-backend/all.css" media="all" />
</head>
<body>
    <header>
        <a href="/ios-backend/">
            <strong>
                DataCapturing
            </strong>
            <span>Documentation</span>
        </a>
    </header>

    <!--
    <form class="search">
        <input type="search" placeholder="Search" />
    </form>
    -->

    <nav>
        <div class="wrapper">
            <h2>On This Page</h2>
            <ol><li><a href="#relationships">Relationships</a><ul><li><a href="#relationships">Nested Types</a></li></ul></li><li><a href="#initializers">Initializers</a><ul><li class="initializer"><a href="#serverconnection.init(apiurl:authenticator:onmanager:)">init(api​URL:​authenticator:​on​Manager:​)</a></li></ul></li><li><a href="#properties">Properties</a><ul><li class="variable"><a href="#serverconnection.apiurl">api​URL</a></li><li class="variable"><a href="#serverconnection.authenticator">authenticator</a></li></ul></li><li><a href="#methods">Methods</a><ul><li class="function"><a href="#serverconnection.sync(measurement:onsuccess:onfailure:)">sync(measurement:​on​Success:​on​Failure:​)</a></li></ul></li></ol>
        </div>
    </nav>

    <main>
        <article>
            <h1>
    <small>Class</small>
    <code class="name">Server​Connection</code>
</h1>

<div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">class</span> <span class="type">ServerConnection</span>  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Realizes a connection to a Cyface Collector server.</p>

</div>
<div class="discussion">
    <p>An object of this class realizes a connection between an iOS app capturing some data and a Cyface Collector server receiving that data.
The data is transmitted using HTTPS in chunks of one measurement.
The transmission format is compressed Cyface binary format.
The cyface binary format is created by a <code>CyfaceBinaryFormatSerializer</code>.</p>

<p>This implementation follows code published here: https://gist.github.com/toddhopkinson/60cae9e48e845ce02bcf526f388cfa63</p>

<aside class="author" title="Author">
    <p>Klemens Muthmann</p>

</aside>
<aside class="version" title="Version">
    <p>8.1.0</p>

</aside>
<aside class="since" title="Since">
    <p>1.0.0</p>

</aside>
</div>
<section id="relationships">
    <h2 hidden>Relationships</h2>
        
        <h3>Nested Types</h3>
<dl>
    <dt class="enumeration"><code><a href="/ios-backend/ServerConnection_ServerConnectionError">ServerConnection.ServerConnectionError</a></code></dt>
<dd><p>A structure encapsulating errors used by server connections.</p>
</dd>
</dl>
</section>
    <section id="initializers">
        <h2>Initializers</h2>

        <div role="article" class="initializer" id="serverconnection.init(apiurl:authenticator:onmanager:)">
    <h3>
        <code><a href="#serverconnection.init(apiurl:authenticator:onmanager:)">init(api​URL:​authenticator:​on​Manager:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="attribute">required</span> <span class="keyword">init</span>(<span class="variable">apiURL</span> <span class="variable">url</span>: <span class="type">URL</span>, <span class="variable">authenticator</span>: <a href="/ios-backend/Authenticator"><span class="type">Authenticator</span></a>, <span class="variable">onManager</span> <span class="variable">manager</span>: <a href="/ios-backend/CoreDataManager"><span class="type">CoreDataManager</span></a>)  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Creates a new server connection to a certain endpoint, using the provided authentication method.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>api​URL</th>
    <td><code class="type">URL</code></td>
    <td><p>The URL endpoint to upload data to.</p>
</td>
</tr>
<tr>
    <th>authenticator</th>
    <td><code class="type">Authenticator</code></td>
    <td><p>An object used to authenticate this app with a Cyface Collector server.</p>
</td>
</tr>
<tr>
    <th>on​Manager</th>
    <td><code class="type">Core​Data​Manager</code></td>
    <td><p>The <em>CoreData</em> stack used to load the data to transmit.</p>
</td>
</tr>
  </tbody>
</table>
</div>
    </section>
    <section id="properties">
        <h2>Properties</h2>

        <div role="article" class="variable" id="serverconnection.apiurl">
    <h3>
        <code><a href="#serverconnection.apiurl">api​URL</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">var</span> <span class="variable">apiURL</span>: <span class="type">URL</span></body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An <code>URL</code> used to upload data to. There should be a server available at that location.</p>

</div>
</div>
<div role="article" class="variable" id="serverconnection.authenticator">
    <h3>
        <code><a href="#serverconnection.authenticator">authenticator</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">let</span> <span class="variable">authenticator</span>: <a href="/ios-backend/Authenticator"><span class="type">Authenticator</span></a></body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>An object used to authenticate this app with a Cyface Collector server.</p>

</div>
</div>
    </section>
    <section id="methods">
        <h2>Methods</h2>

        <div role="article" class="function" id="serverconnection.sync(measurement:onsuccess:onfailure:)">
    <h3>
        <code><a href="#serverconnection.sync(measurement:onsuccess:onfailure:)">sync(measurement:​on​Success:​on​Failure:​)</a></code>
    </h3>
    <div class="declaration">
<pre class="highlight"><code><html><body><span class="keyword">public</span> <span class="keyword">func</span> <span class="function">sync</span>(<span class="variable">measurement</span>: <span class="type">Int64</span>, <span class="variable">onSuccess</span> <span class="variable">success</span>: <span class="attribute">@</span><span class="attribute">escaping</span> ((<span class="type">Int64</span>) -&gt; <span class="type">Void</span>) = {<span class="keyword">_</span> <span class="keyword">in</span> }, <span class="variable">onFailure</span> <span class="variable">failure</span>: <span class="attribute">@</span><span class="attribute">escaping</span> ((<span class="type">Int64</span>, <span class="type">Error</span>) -&gt; <span class="type">Void</span>) = {<span class="keyword">_</span>, <span class="keyword">_</span> <span class="keyword">in</span> })  </body></html></code></pre>
</div>
<div class="summary" role="doc-abstract">
    <p>Synchronizes the provided <code>measurement</code> with a remote server and calls either a <code>success</code> or <code>failure</code> handler when finished.</p>

</div>
<h4>Parameters</h4>

<table class="parameters">
  <thead hidden>
  <tr>
      <th>Name</th>
      <th>Type</th>
      <th>Description</th>
  </tr>
  </thead>
  <tbody>
    <tr>
    <th>measurement</th>
    <td><code class="type">Int64</code></td>
    <td><p>The measurement to synchronize.</p>
</td>
</tr>
<tr>
    <th>on​Success</th>
    <td><code class="type">@escaping ((Int64) -&gt; Void)</code></td>
    <td><p>The handler to call, when synchronization has succeeded. This handler is provided with the synchronized <code>MeasurementEntity</code>.</p>
</td>
</tr>
<tr>
    <th>on​Failure</th>
    <td><code class="type">@escaping ((Int64, Error) -&gt; Void)</code></td>
    <td><p>The handler to call, when the synchronization has failed. This handler provides an error status. The error contains the reason of the failure. The <code>MeasurementEntity</code> is the same as the one provided as parameter to this method.</p>
</td>
</tr>
  </tbody>
</table>
</div>
    </section>



        </article>
    </main>

    <footer>
        <p>
    Generated on <time datetime="2022-01-03T14:05:57+0100">January 3, 2022</time> using <a href="https://github.com/SwiftDocOrg/swift-doc">swift-doc</a> <span class="version">1.0.0-rc.1</span>.
</p>
    </footer>
</body>
</html>
